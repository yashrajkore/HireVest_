<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find Jobs</title>
    <script src="https://kit.fontawesome.com/b3878f124d.js" crossorigin="anonymous"></script>
    <style>
        body{
            background-color: #0a0f2c;
            margin: 0;
            font-family: 'Poppins', sans-serif;
        }
      .job-card {
        background: #1f2937;
        border-radius: 10px;
        padding: 20px;
        color: #f1f5f9;
        display: flex;
        margin-top: 52px;
        height: 200px;
        width: 1000px;
        flex-direction: column;
        justify-content: space-between;
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        transition: transform 0.3s ease-in-out;
      }
      
      .job-card:hover {
        transform: scale(1.05);
      }
      
      .job-header {
        display: flex;
        align-items: center;
        gap: 15px;
      }
      
      .job-header img {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: #fff;
        object-fit: cover;
      }
      
      .job-header h3 {
        margin: 0;
        font-size: 1.2rem;
        font-weight: 600;
      }
      
      .job-header p {
        margin: 0;
        font-size: 0.9rem;
        color: #94a3b8;
      }
      
      .job-info {
        margin-top: 15px;
        display: flex;
        align-items: center;
        gap: 10px;
      }
      
      .badge {
        background-color: #64748b;
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 0.75rem;
        text-transform: uppercase;
      }
      
      .onsite {
        background-color: #22c55e;
      }
      
      .job-salary {
        margin-top: 10px;
        font-weight: bold;
        font-size: 1.1rem;
      }
      
      .job-positions {
        font-size: 0.9rem;
        margin-top: 5px;
        color: #94a3b8;
      }
      
      .job-details-link {
        margin-top: 20px;
      }
      
      .job-details-link a {
        color: #8b5cf6;
        text-decoration: none;
        font-weight: bold;
        font-size: 0.9rem;
      }
      
      .job-details-link a:hover {
        text-decoration: underline;
      }

      .job-footer {
        margin-top: 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .analysis-btn {
        background: #8b5cf6;
        border: none;
        padding: 10px 20px;
        border-radius: 8px;
        cursor: pointer;
        color: white;
        font-size: 1rem;
        transition: background 0.3s ease-in-out, transform 0.2s;
      }

      .analysis-btn:hover {
        background: #7c3aed;
        transform: scale(1.1);
      }
      #listing{
        float: right;
        margin-right: 50px;
      }
      #filter{
        float: left;
        margin-left: 50px;
        font-size: 16px;
      }
    #top_pos{
        margin-top: 120px;
    }
    nav{
        width: auto;
        height: 4.0rem;
        background: #181e35;
        padding-top: 20px;
        padding-left: 50px;
        #strtr{
            margin-left: 52rem;
        }
        a{
            text-decoration: none;
            color: white;
            font-weight: 600;
            font-size: 18px;
            margin-right: 35px;
        }
        a:hover{
          color: blue;
        }
        .login_btn{
            background: linear-gradient(to right, #bb29f9, #0e02ff);
            height: 3.5rem;
            text-decoration: none;
            width: 10rem;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 800;
            transition: transform 0.3s ease-in-out;
            text-decoration: none;
            color: white;
        }
    }

    /* Modal Styles */
.modal {
  display: none; 
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(5px);
  justify-content: center;
  align-items: center;
}

.modal-content {
  background-color: #1f2937;
  padding: 20px;
  border-radius: 15px;
  width: 80%;
  max-width: 800px;
  height: 500px;
  position: relative;
  box-shadow: 0 10px 30px rgba(0,0,0,0.5);
}

.close-modal {
  position: absolute;
  top: 15px;
  right: 20px;
  color: white;
  font-size: 28px;
  cursor: pointer;
}

#chart-container {
  width: 100%;
  height: 90%;
  margin-top: 20px;
}

    </style>
</head>
<body>
    <nav>
        <span style="font-size: 30px; font-weight: bold;color: white;">Hire</span><span style="color: #6495ed; font-size: 30px; font-weight: bold;">Vest</span>

        <a href="#" id="strtr">Home</a>
        <a href="#">Jobs</a>
        <a href="#">Contact</a>

        <button class="login_btn">Join Now!</button>
    </nav>
    <section id="filter">
        <h2 style="color: white; font-size: 32px;">Filter<br>Jobs</h2>
        <hr><br>
        <h3 style="color: white; font-size:26px;">Location</h3>
        <input type="checkbox" id="Mumbai"> 
        <label for="Mumbai" style="color: white; font-size: 20px;">Mumbai</label><br>
        <input type="checkbox" id="Pune">
        <label for="Pune" style="color: white; font-size: 20px;">Pune</label><br>
        <input type="checkbox" id="Nagpur">
        <label for="Nagpur" style="color: white; font-size: 20px;">Nagpur</label><br>
        <input type="checkbox" id="Bangalore">
        <label for="Bangalore" style="color: white; font-size: 20px;">Bangalore</label><br>
        <input type="checkbox" id="Hyderabad">
        <label for="Hyderabad" style="color: white; font-size: 20px;">Hyderabad</label><br>
        <input type="checkbox" id="Thane">
        <label for="Thane" style="color: white; font-size: 20px;">Thane</label><br>
        <input type="checkbox" id="Noida">
        <label for="Noida" style="color: white; font-size: 20px;">Noida</label><br>

        <h3 style="color: white; font-size:26px;">Job Title</h3>
        <input type="checkbox" id="Web Developer">
        <label for="Web Developer" style="color: white; font-size: 20px;">Web Developer</label><br>
        <input type="checkbox" id="Software Developer">
        <label for="Software Developer" style="color: white; font-size: 20px;">Software Developer</label><br>
        <input type="checkbox" id="Java Developer">
        <label for="Java Developer" style="color: white; font-size: 20px;">Java Developer</label><br>
        <input type="checkbox" id="Data Analyst">
        <label for="Data Analyst" style="color: white; font-size: 20px;">Data Analyst</label><br>
        <input type="checkbox" id="UI/UX Designer">
        <label for="UI/UX Designer" style="color: white; font-size: 20px;">UI/UX Designer</label><br>
        <input type="checkbox" id="Cloud Engineer">
        <label for="Cloud Engineer" style="color: white; font-size: 20px;">Cloud Engineer</label><br>
        <input type="checkbox" id="Data Scientist">
        <label for="Data Scientist" style="color: white; font-size: 20px;">Data Scientist</label><br>
        <input type="checkbox" id="AI & ML Developer">
        <label for="AI & ML Developer" style="color: white; font-size: 20px;">AI & ML Developer</label><br>
        <input type="checkbox" id="Frontend Developer">
        <label for="Frontend Developer" style="color: white; font-size: 20px;">Frontend Developer</label><br>
        <input type="checkbox" id="Backend Developer">
        <label for="Backend Developer" style="color: white; font-size: 20px;">Backend Developer</label><br>
        <input type="checkbox" id="Full Stack Developer">
        <label for="Full Stack Developer" style="color: white; font-size: 20px;">Full Stack Developer</label><br>

        <h3 style="color: white; font-size:26px;">Package Range</h3>
        <input type="checkbox" id="2LPA - 5LPA">
        <label for="2LPA - 5LPA" style="color: white; font-size: 20px;">2LPA - 5LPA</label><br>
        <input type="checkbox" id="5LPA - 10LPA">
        <label for="5LPA - 10LPA" style="color: white; font-size: 20px;">5LPA - 10LPA</label><br>
        <input type="checkbox" id="10LPA - 15LPA">
        <label for="10LPA - 15LPA" style="color: white; font-size: 20px;">10LPA - 15LPA</label><br>
        <input type="checkbox" id="15LPA - 20LPA">
        <label for="15LPA - 20LPA" style="color: white; font-size: 20px;">15LPA - 20LPA</label><br>
        <input type="checkbox" id="20LPA - 35LPA">
        <label for="20LPA - 35LPA" style="color: white; font-size: 20px;">20LPA - 35LPA</label><br>

    </section>
    <section id="listing">
  <div class="job-card" id="top_pos">
  <div class="job-header">
    <img src="logo1.png" alt="Company Logo">
    <div>
      <h3>Data Scientist</h3>
      <p>TCS</p>
    </div>
  </div>

  <div class="job-info">
    <span class="badge">remote</span>
    <span>Pune</span>
  </div>

  <div class="job-salary">9.5 LPA</div>
  <div class="job-positions">2 Positions</div>

  <!-- footer row -->
  <div class="job-footer">
    <div class="job-details-link">
      <a href="signUp.html">Details →</a>
    </div>
    <button class="analysis-btn">
      <i class="fas fa-chart-line"></i>
    </button>
  </div>
</div>


  <div class="job-card">
        <div class="job-header">
          <img src="logo2.png" alt="Company Logo">
          <div>
            <h3>Frontend Developer</h3>
            <p>Adobe</p>
          </div>
        </div>
        <div class="job-info">
          <span class="badge">remote</span>
          <span>Hyderabad</span>
        </div>
        <div class="job-salary">8.5 LPA</div>
        <div class="job-positions">3 Positions</div>
        <div class="job-footer">
    <div class="job-details-link">
      <a href="signUp.html">Details →</a>
    </div>
    <button class="analysis-btn">
      <i class="fas fa-chart-line"></i>
    </button>
  </div>
      </div>
  
      <!-- Job Card 3 -->
  <div class="job-card">
      <div class="job-header">
        <img src="logo3.png" alt="Company Logo">
        <div>
          <h3>Java Developer</h3>
          <p>Infosys</p>
        </div>
      </div>
      <div class="job-info">
        <span class="badge onsite">On site</span>
        <span>Surat</span>
      </div>
      <div class="job-salary">6.5 LPA</div>
      <div class="job-positions">10 Positions</div>
      <div class="job-footer">
      <div class="job-details-link">
        <a href="signUp.html">Details →</a>
      </div>
      <button class="analysis-btn">
        <i class="fas fa-chart-line"></i>
      </button>
    </div>
  </div>

      <!--Job 4 card-->
      <div class="job-card">
        <div class="job-header">
          <img src="logo4.png" alt="Company Logo">
          <div>
            <h3>Cloud Engineer</h3>
            <p>Google</p>
          </div>
        </div>
        <div class="job-info">
          <span class="badge onsite">On site</span>
          <span>Bangalore</span>
        </div>
        <div class="job-salary">24 LPA</div>
        <div class="job-positions">8 Positions</div>
        <div class="job-footer">
    <div class="job-details-link">
      <a href="signUp.html">Details →</a>
    </div>
    <button class="analysis-btn">
      <i class="fas fa-chart-line"></i>
    </button>
  </div>
      </div>

      <!--job 5 card-->
      <div class="job-card">
        <div class="job-header">
          <img src="logo5.png" alt="Company Logo">
          <div>
            <h3>Machine Learning Engineer</h3>
            <p>Microsoft</p>
          </div>
        </div>
        <div class="job-info">
          <span class="badge">remote</span>
          <span>Hyderabad</span>
        </div>
        <div class="job-salary">28 LPA</div>
        <div class="job-positions">4 Positions</div>
        <div class="job-footer">
    <div class="job-details-link">
      <a href="signUp.html">Details →</a>
    </div>
    <button class="analysis-btn">
      <i class="fas fa-chart-line"></i>
    </button>
  </div>
      </div>

      <!--Job-6 card-->
      <div class="job-card">
        <div class="job-header">
          <img src="logo6.jpg" alt="Company Logo">
          <div>
            <h3>Android Developer</h3>
            <p>Zomato</p>
          </div>
        </div>
        <div class="job-info">
          <span class="badge onsite">On site</span>
          <span>Pune</span>
        </div>
        <div class="job-salary">7.5 LPA</div>
        <div class="job-positions">8 Positions</div>
        <div class="job-footer">
    <div class="job-details-link">
      <a href="signUp.html">Details →</a>
    </div>
    <button class="analysis-btn">
      <i class="fas fa-chart-line"></i>
    </button>
  </div>
      </div>

    <div id="dynamic-jobs-container">
    </div>

    </section>
    </div>

    <script>
  document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
    checkbox.addEventListener('change', filterJobs);
  });

  function filterJobs() {
    const selectedLocations = getCheckedValues([
      'Mumbai', 'Pune', 'Nagpur', 'Bangalore', 'Hyderabad', 'Thane', 'Noida'
    ]);
    const selectedTitles = getCheckedValues([
      'Web Developer', 'Software Developer', 'Java Developer',
      'Data Analyst', 'UI/UX Designer', 'Cloud Engineer',
      'Data Scientist', 'AI & ML Developer', 'Frontend Developer',
      'Backend Developer', 'Full Stack Developer'
    ]);
    const selectedPackages = getCheckedValues([
      '2LPA - 5LPA', '5LPA - 10LPA', '10LPA - 15LPA',
      '15LPA - 20LPA', '20LPA - 35LPA'
    ]);

    const cards = document.querySelectorAll('.job-card');
    cards.forEach(card => {
      const title = card.querySelector('h3').textContent.trim();
      const location = card.querySelector('.job-info span:last-child').textContent.trim();
      const salaryText = card.querySelector('.job-salary').textContent.trim();
      const salary = parseFloat(salaryText);

      let locationMatch = selectedLocations.length === 0 || selectedLocations.includes(location);
      let titleMatch = selectedTitles.length === 0 || selectedTitles.includes(title);
      let packageMatch = selectedPackages.length === 0 || matchesPackageRange(salary, selectedPackages);

      if (locationMatch && titleMatch && packageMatch) {
        card.style.display = "flex";
      } else {
        card.style.display = "none";
      }
    });
  }

  function getCheckedValues(ids) {
    return ids.filter(id => document.getElementById(id)?.checked);
  }

  function matchesPackageRange(salary, ranges) {
    return ranges.some(range => {
      const [min, max] = range.split(' - ').map(p => parseFloat(p.replace('LPA', '')));
      return salary >= min && salary <= max;
    });
  }
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const container = document.getElementById('dynamic-jobs-container');
        const storedJobs = JSON.parse(localStorage.getItem('portalJobs')) || [];

        storedJobs.forEach(job => {
            const jobCard = document.createElement('div');
            jobCard.className = 'job-card'; // This triggers your existing CSS
            
            // We mirror your exact HTML structure here
            jobCard.innerHTML = `
                <div class="job-header">
                    <img src="https://via.placeholder.com/40" alt="Company Logo">
                    <div>
                        <h3>${job.title}</h3>
                        <p>${job.company}</p>
                    </div>
                </div>

                <div class="job-info">
                    <span class="badge">${job.badge}</span>
                    <span>${job.location}</span>
                </div>

                <div class="job-salary">${job.salary}</div>
                <div class="job-positions">${job.positions} Positions</div>

                <div class="job-footer">
                    <div class="job-details-link">
                        <a href="#">Details →</a>
                    </div>
                    <button class="analysis-btn">
                        <i class="fas fa-chart-line"></i>
                    </button>
                </div>
            `;
            
            container.appendChild(jobCard);
        });
        // Refresh the filter logic after adding new cards
        filterJobs(); 
      });
</script>

<div id="stockModal" class="modal">
    <div class="modal-content">
        <span class="close-modal" onclick="closeModal()">&times;</span>
        <h2 id="modalTitle" style="color: white; margin-top: 0;">Company Analytics</h2>
        <div id="chart-container">
            </div>
    </div>
</div>
<script>

// Mapping company names to Tickers (BSE/NSE for Indian, NASDAQ/NYSE for others)
const tickerMap = {
    "TCS": "BSE:TCS",
    "Adobe": "NASDAQ:ADBE",
    "Infosys": "BSE:INFY",
    "Google": "NASDAQ:GOOGL",
    "Microsoft": "NASDAQ:MSFT",
    "Zomato": "BSE:ZOMATO"
};

// Use Event Delegation to handle clicks on all analysis buttons
document.addEventListener('click', function (e) {
    if (e.target.closest('.analysis-btn')) {
        const card = e.target.closest('.job-card');
        const companyName = card.querySelector('.job-header p').textContent.trim();
        openStockAnalysis(companyName);
    }
});

function openStockAnalysis(company) {
    const modal = document.getElementById('stockModal');
    const container = document.getElementById('chart-container');
    const title = document.getElementById('modalTitle');
    
    title.innerText = `${company} Market Analytics`;
    container.innerHTML = ""; // Clear old chart
    modal.style.display = "flex";

    const ticker = tickerMap[company] || "BSE:SENSEX"; // Fallback to Sensex if not found

    // TradingView Widget Script
    const script = document.createElement('script');
    script.src = "https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js";
    script.type = "text/javascript";
    script.async = true;
    script.innerHTML = JSON.stringify({
        "symbols": [[company, ticker]],
        "chartOnly": false,
        "width": "100%",
        "height": "100%",
        "locale": "en",
        "colorTheme": "dark",
        "gridLineColor": "rgba(42, 46, 57, 0)",
        "fontFamily": "Poppins, sans-serif",
        "trendLineColor": "#8b5cf6",
        "underLineColor": "rgba(139, 92, 246, 0.15)",
        "isReadOnly": false,
        "showFloatingTooltip": true
    });
    
    container.appendChild(script);
}

function closeModal() {
    document.getElementById('stockModal').style.display = "none";
}

// Close modal if user clicks outside the box
window.onclick = function(event) {
    const modal = document.getElementById('stockModal');
    if (event.target == modal) {
        closeModal();
    }
}

</script>
</body>
</html>